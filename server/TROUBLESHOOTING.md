# 502 é”™è¯¯æ’æŸ¥å’Œä¿®å¤æŒ‡å—

## ğŸ” é—®é¢˜è¯Šæ–­

502 é”™è¯¯é€šå¸¸è¡¨ç¤ºï¼š
- åç«¯æœåŠ¡æœªå¯åŠ¨æˆ–å´©æºƒ
- å‰ç«¯æ— æ³•è¿æ¥åˆ°åç«¯
- ç«¯å£é…ç½®é”™è¯¯

## ğŸ› ï¸ å¿«é€Ÿä¿®å¤æ­¥éª¤

### 1. æ£€æŸ¥åç«¯æœåŠ¡çŠ¶æ€

```bash
# æ£€æŸ¥åç«¯æ˜¯å¦åœ¨è¿è¡Œ
ps aux | grep "python.*run.py"
# æˆ–
ps aux | grep uvicorn

# æ£€æŸ¥ç«¯å£8000æ˜¯å¦è¢«å ç”¨
lsof -i :8000
# æˆ–
netstat -tlnp | grep 8000

# æ£€æŸ¥åç«¯æ—¥å¿—
tail -50 logs/backend.log
```

### 2. æ£€æŸ¥å‰ç«¯æœåŠ¡çŠ¶æ€

```bash
# æ£€æŸ¥å‰ç«¯æ˜¯å¦åœ¨è¿è¡Œ
ps aux | grep vite
# æˆ–
ps aux | grep node

# æ£€æŸ¥ç«¯å£5173æ˜¯å¦è¢«å ç”¨
lsof -i :5173
# æˆ–
netstat -tlnp | grep 5173

# æ£€æŸ¥å‰ç«¯æ—¥å¿—
tail -50 logs/frontend.log
```

### 3. æ‰‹åŠ¨å¯åŠ¨åç«¯ï¼ˆæµ‹è¯•ï¼‰

```bash
cd backend
source venv/bin/activate
python run.py
```

å¦‚æœå¯åŠ¨å¤±è´¥ï¼ŒæŸ¥çœ‹é”™è¯¯ä¿¡æ¯ã€‚

### 4. æ‰‹åŠ¨å¯åŠ¨å‰ç«¯ï¼ˆæµ‹è¯•ï¼‰

```bash
cd frontend
npm run dev
```

### 5. æ£€æŸ¥åç«¯APIæ˜¯å¦å¯è®¿é—®

```bash
# æµ‹è¯•åç«¯å¥åº·æ£€æŸ¥
curl http://localhost:8000/api/health

# æµ‹è¯•åç«¯æ ¹è·¯å¾„
curl http://localhost:8000/

# å¦‚æœè¿”å› JSONï¼Œè¯´æ˜åç«¯æ­£å¸¸
```

## ğŸ”§ å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜1: åç«¯æœåŠ¡æœªå¯åŠ¨

**ç—‡çŠ¶**: `curl http://localhost:8000` æ— å“åº”

**è§£å†³**:
```bash
# åœæ­¢æ‰€æœ‰ç›¸å…³è¿›ç¨‹
./stop.sh

# é‡æ–°å¯åŠ¨
./deploy.sh
```

### é—®é¢˜2: åç«¯å¯åŠ¨å¤±è´¥

**ç—‡çŠ¶**: åç«¯æ—¥å¿—æ˜¾ç¤ºé”™è¯¯

**å¸¸è§åŸå› **:
1. `.env` æ–‡ä»¶é…ç½®é”™è¯¯
2. Python ä¾èµ–æœªå®‰è£…
3. ç«¯å£è¢«å ç”¨

**è§£å†³**:
```bash
# æ£€æŸ¥ .env æ–‡ä»¶
cat backend/.env

# é‡æ–°å®‰è£…ä¾èµ–
cd backend
source venv/bin/activate
pip install -r requirements.txt

# æ£€æŸ¥ç«¯å£å ç”¨
sudo lsof -i :8000
```

### é—®é¢˜3: å‰ç«¯ä»£ç†é…ç½®é—®é¢˜

**ç—‡çŠ¶**: å‰ç«¯èƒ½è®¿é—®ä½†APIè¯·æ±‚502

**è§£å†³**: æ£€æŸ¥ `frontend/vite.config.ts` æ˜¯å¦æœ‰ä»£ç†é…ç½®

### é—®é¢˜4: CORS é”™è¯¯

**ç—‡çŠ¶**: æµè§ˆå™¨æ§åˆ¶å°æ˜¾ç¤º CORS é”™è¯¯

**è§£å†³**: æ£€æŸ¥åç«¯ `main.py` ä¸­çš„ CORS é…ç½®

## ğŸ“‹ å®Œæ•´é‡å¯æµç¨‹

```bash
# 1. åœæ­¢æ‰€æœ‰æœåŠ¡
./stop.sh

# 2. ç­‰å¾…å‡ ç§’
sleep 3

# 3. æ£€æŸ¥ç«¯å£æ˜¯å¦é‡Šæ”¾
lsof -i :8000
lsof -i :5173

# 4. é‡æ–°éƒ¨ç½²
./deploy.sh

# 5. ç­‰å¾…æœåŠ¡å¯åŠ¨ï¼ˆçº¦10ç§’ï¼‰
sleep 10

# 6. æ£€æŸ¥æœåŠ¡çŠ¶æ€
curl http://localhost:8000/api/health
curl http://localhost:5173
```

## ğŸš¨ ç´§æ€¥ä¿®å¤å‘½ä»¤

å¦‚æœä»¥ä¸Šéƒ½ä¸è¡Œï¼Œæ‰§è¡Œå®Œæ•´é‡ç½®ï¼š

```bash
# åœæ­¢æ‰€æœ‰æœåŠ¡
./stop.sh

# æ¸…ç†è¿›ç¨‹
pkill -f "python.*run.py"
pkill -f "vite"
pkill -f "uvicorn"

# æ¸…ç†ç«¯å£
sudo lsof -ti :8000 | xargs kill -9 2>/dev/null || true
sudo lsof -ti :5173 | xargs kill -9 2>/dev/null || true

# é‡æ–°éƒ¨ç½²
./deploy.sh
```

## ğŸ“ è·å–æ›´å¤šå¸®åŠ©

å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·æä¾›ï¼š
1. åç«¯æ—¥å¿—: `tail -100 logs/backend.log`
2. å‰ç«¯æ—¥å¿—: `tail -100 logs/frontend.log`
3. ç³»ç»Ÿä¿¡æ¯: `uname -a`
4. Pythonç‰ˆæœ¬: `python3 --version`
5. Nodeç‰ˆæœ¬: `node --version`

